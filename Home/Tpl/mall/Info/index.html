
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<include file="Public:head" />
<title>鹿酷_用户中心_个人信息</title>
<link rel="stylesheet" type="text/css" href="__CS__/global.css"/>
<link rel="stylesheet" type="text/css" href="__CS__/service.css" />

<script type="text/javascript" src="__JS__/kui.js"></script>
<script src="__JS__/jquery-1.8.1.js" type="text/javascript"></script>
<script src="__JS__/kevin.js" type="text/javascript"></script>

<script language="javascript" type="text/javascript" src="__JS__/WdatePicker.js"></script>

<!-- <script src="__JS__/Area.js" type="text/javascript"></script>
<script src="__JS__/AreaData_min.js" type="text/javascript"></script> -->
<script src="__JS__/region.js" type="text/javascript"></script>
<script type="text/javascript">
// //初始化加载地区 如果不须要请把后三个参数改为 "0"
// $(function (){
//     initComplexArea('seachprov', 'seachcity', 'seachdistrict', area_array, sub_array, '0', '0', '0');
// });
// $(function (){
//     initComplexArea('seachprov2', 'seachcity2', 'seachdistrict2', area_array, sub_array, '0', '0', '0');
// });

// //得到地区码
// function getAreaID(){
//     var area = 0;          
//     if($("#seachdistrict").val() != "0"){
//         area = $("#seachdistrict").val();                
//     }else if ($("#seachcity").val() != "0"){
//         area = $("#seachcity").val();
//     }else{
//         area = $("#seachprov").val();
//     }
//     return area;
// }
// function getAreaID(){
//     var area = 0;          
//     if($("#seachdistrict2").val() != "0"){
//         area = $("#seachdistrict2").val();                
//     }else if ($("#seachcity2").val() != "0"){
//         area = $("#seachcity2").val();
//     }else{
//         area = $("#seachprov2").val();
//     }
//     return area;
// }

// function showAreaID() {
//     //地区码
//     var areaID = getAreaID();
//     //地区名
//     var areaName = getAreaNamebyID(areaID) ;
//     //alert("您选择的地区码：" + areaID + "      地区名：" + areaName);
// }

// //根据地区码查询地区名
// function getAreaNamebyID(areaID){
//     var areaName = "";
//     if(areaID.length == 2){
//         areaName = area_array[areaID];
//     }else if(areaID.length == 4){
//         var index1 = areaID.substring(0, 2);
//         areaName = area_array[index1] + " " + sub_array[index1][areaID];
//     }else if(areaID.length == 6){
//         var index1 = areaID.substring(0, 2);
//         var index2 = areaID.substring(0, 4);
//         areaName = area_array[index1] + " " + sub_array[index1][index2] + " " + sub_arr[index2][areaID];
//     }
//     return areaName;
// }
</script>
</head>

<body>
<include file="Public:header" />
<div class="wrap">
<div class="main">
	<include file="Public:usermsg" />
    <div class="boxR info fl"> 
    	<div class="title">
        	<include file="Public:infomsg" />
        </div>
        <form action="" method="post" name="" id="userinfoForm">
            <dl class="infoList">
                
            	<dt>用户名：</dt>
                <dd>{$user_name}<span class="gray">&nbsp;&nbsp;&nbsp;&nbsp;UID号{$data.user_id}</span><span class="gray fs12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户名不可修改</span></dd>
                <!-- <dt>性别：</dt>
                <dd>
                <select  id="sex" name="sex">
                        <option value="1" <?php $data['user_sex'] = '1' ? 'checked' : '' ; ?> >男</option>
                        <option value="0" <?php $data['user_sex'] = '0' ? 'checked' : '' ; ?> >女</option>
                        </select>
                </dd> -->
                <dt>生日：</dt>
                <dd>
                    <input id="birth"  value="{$data['user_birthday']}"  name="birthday" class="Wdate" type="text" onClick="WdatePicker()"> 
                </dd>
                <dt>故乡：</dt>
                <dd>
                    <!-- <select  id="seachprov" name="seachprov" onChange="changeComplexProvince(this.value, sub_array, 'seachcity', 'seachdistrict');"></select>&nbsp;&nbsp;
                    <select  id="seachcity" name="homecity" onChange="changeCity(this.value,'seachdistrict','seachdistrict');"></select>&nbsp;&nbsp;
                    <span id="seachdistrict_div"><select  id="seachdistrict" name="seachdistrict"></select></span> -->
                    <select  name="province" id="province" onchange="loadRegion('province',2,'city','{:U('Ajax/getRegion')}');">
                        <if condition="$home['0'] neq null">
                            <option value="{$home['0']}" selected="selected" >{$home['0']}</option>
                        <else/>
                            <option value="0" selected>省份/直辖市</option>
                        </if>
                        <volist name="province" id="vo"> 
                            <option value="{$vo.id}" >{$vo.name}</option>
                        </volist>
                    </select>
                    <select  name="city" id="city"  onchange="loadRegion('city',3,'town','{:U('Ajax/getRegion')}');">
                        <if condition="$home['1'] neq null">
                            <option value="{$home['1']}" selected="selected" >{$home['1']}</option>
                        <esle/> 
                            <option value="0">市/县</option>
                        </if>
                    </select>
                    <select  name="town" id="town">
                        <if condition="$home['2'] neq null">
                            <option value="{$home['2']}" selected="selected" >{$home['2']}</option>
                        <esle/>
                            <option value="0">镇/区</option>
                        </if>
                    </select>
                </dd>
                <dt>所在地：</dt>
                <dd>
                    <select  name="province" id="prov" onchange="reloadRegion('prov',2,'ci','{:U('Ajax/regetRegion')}');">
                        <if condition="$location['0'] neq null">
                            <option value="{$location['0']}" selected="selected" >{$location['0']}</option>
                        <else/>
                            <option value="0" selected>省份/直辖市</option>
                        </if>
                        <volist name="prov" id="vol"> 
                            <option value="{$vol.id}" >{$vol.name}</option>
                        </volist>
                    </select>
                    <select  name="city" id="ci"  onchange="reloadRegion('ci',3,'twn','{:U('Ajax/regetRegion')}');">
                        <if condition="$location['1'] neq null">
                            <option value="{$location['1']}" selected="selected" >{$location['1']}</option>
                        <esle/>
                            <option value="0">市/县</option>
                        </if>
                    </select>
                    <select  name="town" id="twn">
                        <if condition="$location['2'] neq null">
                            <option value="{$location['2']}" selected="selected" >{$location['2']}</option>
                        <esle/>
                            <option value="0">镇/区</option>
                        </if>
                    </select>
                </dd>
                <dt>职业：</dt>
                <dd>
                    <select  id="job" name="job">
                        <if condition="$data['user_job'] neq null">
                            <option value="{$data['user_job']}" selected="selected" >{$data['user_job']}</option>
                        </if>
                        <option value="0">选择职业</option><option  value="1">影视设计师</option><option  value="2">摄影师</option><option value="3">影视特效师</option><option value="4">栏目包装设计师</option><option value="5">婚庆影视制作</option><option value="6">微电影制作</option><option value="7">影视广告设计师</option><option value="8">配音工作者</option><option value="9">剧本/创意设计师</option><option value="10">三维/动画师</option><option value="11">平面设计师</option><option value="12">绘画/插画师</option><option value="13">演员</option><option value="14">模特</option><option value="15">建筑/环艺设计师</option><option value="16" >网页设计师</option><option value="17">GUI设计师</option><option value="18">FLASH动画</option><option value="19">产品设计师</option><option value="20">学生</option><option value="21">影视爱好者</option><option value="22">其它</option>
                    </select>
                </dd>
				<dt>QQ：</dt>
                <dd>
                    <input id="user_qq"  value="{$data['user_qq']}"  name="user_qq" type="text"> 
                </dd>
                <dt>简介：</dt>
                <dd style="height:170px"><textarea id="desc"  name="desc" >{$data['user_summary']}</textarea></dd>
                <dt>&nbsp;</dt>
                <dd style="height:50px"><span id="backdata" ></span></dd>
                <dt>&nbsp;</dt>
                <dd ><input style="margin:0px;" id="button" class="btnPay" value="提交" type="button"></dd>
            </dl>
        </form>
        <div class="clear"></div>	
	</div>
</div>
</div>  
<include file="Public:footer" />
<script type="text/javascript">
    $(function(){
        $("#button").click(function(){
            var  prov1 = $("#province  option:selected").text();
            var  city1 = $("#city  option:selected").text();
            var  town1 = $("#town  option:selected").text();
            var  prov2 = $("#prov  option:selected").text();
            var  city2 = $("#ci  option:selected").text();
            var  town2 = $("#twn  option:selected").text();
            var  sex   = $("#sex  option:selected").text();
            var  job   = $("#job option:selected").text();
            var  birth = $('#birth').val();
			var  user_qq = $('#user_qq').val();
            var  desc  = $('#desc').val();
            $.ajax({
                type: "POST",
                url:"{:U('Info/saveUserInfo')}",
                data:{
                    prov1:prov1,
                    city1:city1,
                    town1:town1,
                    prov2:prov2,
                    city2:city2,
                    town2:town2,
                    sex  :sex,
                    job  :job,
                    birth:birth,
					user_qq:user_qq,
                    desc :desc,
                },
                success: function(msg){
                    // //alert(msg);
                    if (msg=="sucess") {                        
                        $("#backdata").text('修改信息成功!');
                        $("#backdata").css({color: "green"});
                        
                    } else{                        
                        $("#backdata").html('未作任何更改！');
                        $("#backdata").css({color: "red"});
                        
                    };
                }
            });
        });
    })
</script>

</body>
</html>

